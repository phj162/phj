<script type="text/javascript">
    RED.nodes.registerType('ml-genetic', {
        category: 'machineLeaning',
        color: '#cfcfcf',
        defaults: {
            name: {value: ""},
            vlength : {value:"15"},
            dmin : {value:"1"},
            dmax : {value:"100"},
            population : {value:"50"},
            elite : {value:"2"}, // elitism. number of elite chromosomes.
            epochs : {value:"300"},
            q : {value:"0.3"},   // Rank-Based Fitness Assignment. fitness = q * (1-q)^(rank-1)
                                 // higher q --> higher selection pressure
            func: {value:""}
        },
        inputs: 1,
        outputs: 1,
        icon: 'file.png',
        label: function () {
            return this.name || 'ml-genetic';
        },
        oneditprepare: function() {
            this.editor = RED.editor.createEditor({
                id: 'node-input-editor',
                mode: 'ace/mode/javascript',
                value: $("#node-input-func").val()
            });

        },
        oneditsave: function() {

            $("#node-input-func").val(this.editor.getValue());

        }
    });

</script>

<script type="text/x-red" data-template-name="ml-genetic">
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name" />
    </div>

    <div class="form-row">
        <label for="node-input-vlength" style="width: 130px;"><i class="icon-tag"></i> Vector Length </label>
        <input type="text" style="width: 285px;" id="node-input-vlength">
    </div>
    <div class="form-row">
        <label for="node-input-dmin"><i class="icon-tag"></i> Domain Min </label>
        <input type="text" id="node-input-dmin">
    </div>

    <div class="form-row">
        <label for="node-input-dmax"><i class="icon-tag"></i> Domain Max </label>
        <input type="text" id="node-input-dmax">
    </div>

    <div class="form-row">
        <label for="node-input-population"><i class="icon-tag"></i> Population </label>
        <input type="text" id="node-input-population">
    </div>

    <div class="form-row">
        <label for="node-input-elite"><i class="icon-tag"></i> elite </label>
        <input type="text" id="node-input-elite">
    </div>

    <div class="form-row">
        <label for="node-input-epochs"><i class="icon-tag"></i> epochs </label>
        <input type="text" id="node-input-epochs">
    </div>

    <div class="form-row">
        <label for="node-input-q"><i class="icon-tag"></i> Q </label>
        <input type="text" id="node-input-q">
    </div>

    <div class="form-row" style="margin-bottom: 0px;">
        <label for="node-input-func"><i class="fa fa-wrench"></i> <span data-i18n="function.label.function"></span></label>
        <input type="hidden" id="node-input-func" autofocus="autofocus">
        <input type="hidden" id="node-input-noerr">
    <div class="form-row node-text-editor-row">
        <div style="height: 100px;" class="node-text-editor" id="node-input-editor" ></div>
    </div>


</script>